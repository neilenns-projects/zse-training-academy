{{ $src := .Get "src" }}
{{ $alt := .Get "alt" }}
{{ $caption := .Get "caption" }}
{{ $captionHTML := cond (not $caption) "" (.Page.RenderString $caption) }}

{{ $html := printf `<figure style="text-align: center;">
  <img src="%s" alt="%s" style="max-width: 100%%;" />
  %s
</figure>` $src $alt $captionHTML }}

{{ $html | safeHTML }}
